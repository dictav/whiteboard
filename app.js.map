{"version":3,"sources":["init.coffee"],"names":[],"mappings":"AAAA,IAAA,wVAAA;;AAAA,aAAA,GAAgB,IAAhB,CAAA;;AAAA,WACA,GAAc,IADd,CAAA;;AAAA,YAEA,GAAe,IAFf,CAAA;;AAAA,SAIA,GAAY,KAJZ,CAAA;;AAAA,SAKA,GAAY,OALZ,CAAA;;AAAA,UAMA,GAAa,OANb,CAAA;;AAAA,SAOA,GAAY,iBAPZ,CAAA;;AAAA,SAQA,GAAY,CARZ,CAAA;;AAAA,UASA,GAAa,CATb,CAAA;;AAAA,cAUA,GAAiB,CAVjB,CAAA;;AAAA,SAWA,GAAa,IAXb,CAAA;;AAAA,WAYA,GAAc,KAZd,CAAA;;AAAA,OAaA,GAAU,KAbV,CAAA;;AAAA,MAcA,GAAS,CAdT,CAAA;;AAAA,MAeA,GAAS,CAfT,CAAA;;AAAA,KAiBA,GAAQ,IAjBR,CAAA;;AAAA,aAmBA,GAAgB,SAAA,GAAA;AACd,MAAA,MAAA;AAAA,EAAA,MAAA,GAAS,CAAA,CAAE,SAAF,CAAT,CAAA;AAAA,EACA,MAAM,CAAC,IAAP,CAAY,OAAZ,EAAqB,MAAM,CAAC,KAAP,CAAA,CAArB,CADA,CAAA;AAAA,EAEA,MAAM,CAAC,IAAP,CAAY,QAAZ,EAAsB,MAAM,CAAC,MAAP,CAAA,CAAtB,CAFA,CAAA;AAAA,EAIA,MAAM,CAAC,EAAP,CAAU,OAAV,EAAmB,SAAC,CAAD,GAAA;AACjB,QAAA,YAAA;AAAA,IAAA,IAAG,WAAH;AACE,MAAA,KAAA,GAAQ,CAAA,CAAE,UAAF,EAAc,WAAd,CAA0B,CAAC,KAA3B,CAAA,CAAR,CAAA;AAAA,MACA,WAAW,CAAC,SAAZ,GAAwB,MAAA,CAAO,OAAP,CAAe,CAAC,IAAhB,CAAqB,KAAK,CAAC,GAAN,CAAA,CAArB,CAAiC,CAAC,IAAlC,CAAA,CADxB,CAAA;AAAA,MAEA,CAAA,CAAE,WAAF,CAAc,CAAC,KAAf,CAAqB,KAAK,CAAC,KAAN,CAAA,CAArB,CAFA,CAAA;AAAA,MAGA,CAAA,CAAE,WAAF,CAAc,CAAC,MAAf,CAAsB,KAAK,CAAC,MAAN,CAAA,CAAtB,CAHA,CAAA;AAAA,MAIA,KAAA,GAAQ,YAAA,CAAa,WAAb,CAJR,CAAA;AAAA,MAKA,aAAa,CAAC,MAAd,CACE;AAAA,QAAA,EAAA,EAAI,WAAW,CAAC,EAAhB;AAAA,QACA,KAAA,EAAO,IAAI,CAAC,SAAL,CAAe,KAAf,CADP;AAAA,QAEA,IAAA,EAAM,WAAW,CAAC,SAFlB;OADF,CAIC,CAAC,IAJF,CAIQ,SAAA,GAAA;AACN,QAAA,OAAO,CAAC,GAAR,CAAY,SAAZ,CAAA,CAAA;eACA,gBAAA,CAAA,EAFM;MAAA,CAJR,EAOE,WAPF,CALA,CAAA;AAAA,MAaA,WAAA,GAAc,IAbd,CAAA;AAcA,YAAA,CAfF;KAAA;AAiBA,IAAA,IAAG,OAAH;AACE,MAAA,OAAA,GAAU,KAAV,CAAA;AACA,YAAA,CAFF;KAjBA;AAAA,IAqBA,UAAA,EArBA,CAAA;AAAA,IAsBA,OAAO,CAAC,GAAR,CAAY,OAAZ,EAAqB,UAArB,CAtBA,CAAA;AAwBA,IAAA,IAAG,UAAA,KAAc,CAAjB;aACE,KAAA,GAAQ,UAAA,CAAY,SAAA,GAAA;AAClB,QAAA,UAAA,GAAa,CAAb,CAAA;AAAA,QACA,KAAA,GACE;AAAA,UAAA,GAAA,EAAQ,CAAC,CAAC,KAAV;AAAA,UACA,IAAA,EAAQ,CAAC,CAAC,KADV;AAAA,UAEA,KAAA,EAAQ,SAFR;AAAA,UAGA,MAAA,EAAQ,UAHR;AAAA,UAIA,eAAA,EAAiB,SAJjB;SAFF,CAAA;eAOA,aAAA,CAAc,mBAAd,EAAmC,IAAI,CAAC,SAAL,CAAe,KAAf,CAAnC,EARkB;MAAA,CAAZ,EASN,GATM,EADV;KAAA,MAAA;AAYE,MAAA,UAAA,GAAa,CAAb,CAAA;AAAA,MACA,OAAA,GAAU,IADV,CAAA;AAAA,MAEA,MAAA,GAAS,CAAC,CAAC,KAFX,CAAA;AAAA,MAGA,MAAA,GAAS,CAAC,CAAC,KAHX,CAAA;aAIA,YAAA,CAAa,KAAb,EAhBF;KAzBiB;EAAA,CAAnB,CA0CC,CAAC,EA1CF,CA0CK,UA1CL,EA0CiB,SAAC,CAAD,GAAA;WACf,CAAC,CAAC,cAAF,CAAA,EADe;EAAA,CA1CjB,CAJA,CAAA;AAAA,EAiDA,MAAM,CAAC,EAAP,CAAU,WAAV,EAAuB,SAAC,CAAD,GAAA;AACrB,QAAA,aAAA;AAAA,IAAA,IAAA,CAAA,OAAA;AAAA,YAAA,CAAA;KAAA;AAAA,IACA,CAAA,GAAI,CAAC,CAAC,KADN,CAAA;AAAA,IAEA,CAAA,GAAI,CAAC,CAAC,KAFN,CAAA;AAGA,IAAA,IAAG,CAAC,MAAA,GAAS,CAAV,CAAA,GAAa,CAAC,MAAA,GAAS,CAAV,CAAb,GAA4B,CAAC,MAAA,GAAS,CAAV,CAAA,GAAa,CAAC,MAAA,GAAS,CAAV,CAAzC,GAAwD,GAA3D;AACE,YAAA,CADF;KAHA;AAAA,IAMA,OAAA,GAAU,IAAI,CAAC,UAAL,CAAgB,IAAhB,CANV,CAAA;AAAA,IAOA,OAAO,CAAC,WAAR,GAAsB,SAPtB,CAAA;AAAA,IAQA,OAAO,CAAC,SAAR,GAAoB,SARpB,CAAA;AAAA,IASA,OAAO,CAAC,SAAR,CAAA,CATA,CAAA;AAAA,IAUA,OAAO,CAAC,MAAR,CAAe,MAAf,EAAuB,MAAvB,CAVA,CAAA;AAAA,IAWA,OAAO,CAAC,MAAR,CAAe,CAAf,EAAkB,CAAlB,CAXA,CAAA;AAAA,IAYA,OAAO,CAAC,MAAR,CAAA,CAZA,CAAA;AAAA,IAaA,OAAO,CAAC,SAAR,CAAA,CAbA,CAAA;AAAA,IAcA,MAAA,GAAS,CAdT,CAAA;WAeA,MAAA,GAAS,EAhBY;EAAA,CAAvB,CAjDA,CAAA;AAAA,EAmEA,CAAA,CAAE,QAAF,CAAW,CAAC,EAAZ,CAAe,OAAf,EAAwB,SAAC,CAAD,GAAA;AACtB,IAAA,IAAA,CAAA,OAAA;AAAA,YAAA,CAAA;KAAA;AAEA,YAAO,CAAC,CAAC,OAAT;AAAA,WACO,EADP;AACe,QAAA,YAAA,CAAa,CAAb,EAAe,MAAf,CAAA,CADf;AACO;AADP,WAEO,EAFP;AAEe,QAAA,YAAA,CAAa,MAAb,EAAoB,CAApB,CAAA,CAFf;AAEO;AAFP,WAGO,EAHP;AAGe,QAAA,YAAA,CAAa,CAAA,CAAE,IAAF,CAAO,CAAC,KAAR,CAAA,CAAb,EAA6B,MAA7B,CAAA,CAHf;AAGO;AAHP,WAIO,EAJP;AAIe,QAAA,YAAA,CAAa,MAAb,EAAoB,CAAA,CAAE,IAAF,CAAO,CAAC,MAAR,CAAA,CAApB,CAAA,CAJf;AAIO;AAJP;AAKO,cAAA,CALP;AAAA,KAFA;WAQA,OAAA,GAAU,MATY;EAAA,CAAxB,CAnEA,CAAA;AAAA,EA8EA,CAAA,CAAE,aAAF,CAAgB,CAAC,KAAjB,CAAuB,SAAA,GAAA;AACrB,IAAA,IAAG,YAAH;AACE,MAAA,aAAa,CAAC,MAAd,CACE;AAAA,QAAA,EAAA,EAAI,YAAY,CAAC,EAAjB;AAAA,QACA,QAAA,EAAU,IADV;OADF,CAGC,CAAC,IAHF,CAGQ,SAAA,GAAA;AACN,QAAA,OAAO,CAAC,GAAR,CAAY,WAAZ,CAAA,CAAA;eACA,gBAAA,CAAA,EAFM;MAAA,CAHR,EAME,WANF,CAAA,CADF;KAAA;WAQA,CAAA,CAAE,SAAF,CAAY,CAAC,IAAb,CAAA,EATqB;EAAA,CAAvB,CA9EA,CAAA;AAAA,EAwFA,CAAA,CAAE,YAAF,CAAe,CAAC,KAAhB,CAAsB,SAAA,GAAA;WACpB,CAAA,CAAE,SAAF,CAAY,CAAC,IAAb,CAAA,EADoB;EAAA,CAAtB,CAxFA,CAAA;AAAA,EA2FA,CAAA,CAAE,cAAF,CAAiB,CAAC,EAAlB,CAAqB,OAArB,EAA8B,SAAA,GAAA;AAC5B,IAAA,IAAG,IAAI,CAAC,SAAL,KAAkB,UAArB;aACE,IAAI,CAAC,SAAL,GAAiB,SADnB;KAAA,MAAA;aAGE,IAAI,CAAC,SAAL,GAAiB,WAHnB;KAD4B;EAAA,CAA9B,CA3FA,CAAA;SAkGA,CAAA,CAAE,kBAAF,CAAqB,CAAC,EAAtB,CAAyB,OAAzB,EAAkC,SAAA,GAAA;AAChC,QAAA,oBAAA;AAAA,IAAA,MAAA,GAAS,CAAA,CAAE,cAAF,CAAiB,CAAC,KAAlB,CAAA,CAAT,CAAA;AACA,IAAA,IAAG,MAAM,CAAC,QAAP,CAAgB,UAAhB,CAAH;AACE,YAAA,CADF;KADA;AAAA,IAGA,GAAA,GAAM,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAHN,CAAA;AAAA,IAIA,OAAA,GAAU,MAAM,CAAC,QAAP,CAAA,CAAkB,CAAA,CAAA,CAJ5B,CAAA;AAAA,IAKA,MAAO,CAAA,CAAA,CAAE,CAAC,YAAV,CAAuB,GAAvB,EAA4B,IAA5B,CALA,CAAA;AAAA,IAMA,MAAO,CAAA,CAAA,CAAE,CAAC,YAAV,CAAuB,IAAvB,EAA6B,OAA7B,CANA,CAAA;AAAA,IAOA,MAAO,CAAA,CAAA,CAAE,CAAC,YAAV,CAAuB,OAAvB,EAAgC,GAAhC,CAPA,CAAA;WAQA,SAAA,GAAY,CAAA,CAAE,IAAF,CAAO,CAAC,GAAR,CAAY,iBAAZ,EAToB;EAAA,CAAlC,EAnGc;AAAA,CAnBhB,CAAA;;AAAA,YAkIA,GAAe,SAAC,CAAD,EAAG,CAAH,GAAA;AACb,MAAA,eAAA;AAAA,EAAA,MAAA,GAAS,CAAA,CAAE,SAAF,CAAa,CAAA,CAAA,CAAtB,CAAA;AAAA,EACA,OAAA,GAAU,MAAM,CAAC,UAAP,CAAkB,IAAlB,CADV,CAAA;AAAA,EAEA,OAAO,CAAC,WAAR,GAAsB,SAFtB,CAAA;AAAA,EAGA,OAAO,CAAC,SAAR,GAAoB,SAHpB,CAAA;AAAA,EAIA,OAAO,CAAC,SAAR,CAAA,CAJA,CAAA;AAAA,EAKA,OAAO,CAAC,MAAR,CAAe,MAAf,EAAuB,MAAvB,CALA,CAAA;AAAA,EAMA,OAAO,CAAC,MAAR,CAAe,CAAf,EAAkB,CAAlB,CANA,CAAA;AAAA,EAOA,OAAO,CAAC,MAAR,CAAA,CAPA,CAAA;SAQA,OAAO,CAAC,SAAR,CAAA,EATa;AAAA,CAlIf,CAAA;;AAAA,IA4IA,GAAO,SAAA,GAAA;AACH,MAAA,MAAA;AAAA,EAAA,MAAA,GAAa,IAAA,YAAY,CAAC,mBAAb,CACX,sCADW,EAEX,kCAFW,CAAb,CAAA;SAGA,aAAA,GAAgB,MAAM,CAAC,QAAP,CAAgB,UAAhB,EAJb;AAAA,CA5IP,CAAA;;AAAA,aAkJA,GAAgB,SAAC,EAAD,GAAA;AACd,MAAA,MAAA;AAAA,EAAA,MAAA,GAAS,QAAQ,CAAC,aAAT,CAAuB,QAAvB,CAAT,CAAA;AAAA,EACA,MAAM,CAAC,SAAP,GAAmB,gBADnB,CAAA;AAAA,EAEA,MAAM,CAAC,IAAP,GAAc,WAFd,CAAA;AAAA,EAGA,MAAM,CAAC,GAAP,GAAY,+BAAA,GAAkC,EAAlC,GAAuC,QAHnD,CAAA;AAAA,EAIA,CAAA,CAAE,MAAF,CAAS,CAAC,IAAV,CAAe,aAAf,EAA8B,GAA9B,CAJA,CAAA;AAAA,EAKA,CAAA,CAAE,MAAF,CAAS,CAAC,IAAV,CAAe,UAAf,EAA2B,GAA3B,CALA,CAAA;SAMA,OAPc;AAAA,CAlJhB,CAAA;;AAAA,MA2JA,GAAS,8EA3JT,CAAA;;AAAA,KA4JA,GAAQ,4CA5JR,CAAA;;AAAA,aA6JA,GAAgB,SAAC,IAAD,GAAA;AACd,MAAA,MAAA;AAAA,EAAA,IAAG,CAAA,GAAI,IAAI,CAAC,IAAI,CAAC,KAAV,CAAgB,KAAhB,CAAP;WACE,aAAA,CAAc,CAAE,CAAA,CAAA,CAAhB,EADF;GAAA,MAEK,IAAG,IAAI,CAAC,IAAI,CAAC,KAAV,CAAgB,MAAhB,CAAH;AACH,IAAA,GAAA,GAAM,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAN,CAAA;AAAA,IACA,GAAG,CAAC,GAAJ,GAAU,IAAI,CAAC,IADf,CAAA;WAEA,IAHG;GAAA,MAAA;WAKH,QAAQ,CAAC,cAAT,CAAwB,IAAI,CAAC,IAA7B,EALG;GAHS;AAAA,CA7JhB,CAAA;;AAAA,UAuKA,GAAa,SAAC,IAAD,GAAA;AACX,MAAA,KAAA;AAAA,EAAA,KAAA,GAAQ,YAAA,CAAa,IAAb,CAAR,CAAA;SACA,aAAa,CAAC,MAAd,CACE;AAAA,IAAA,EAAA,EAAI,IAAI,CAAC,EAAT;AAAA,IACA,KAAA,EAAO,IAAI,CAAC,SAAL,CAAe,KAAf,CADP;AAAA,IAEA,IAAA,EAAM,IAAI,CAAC,SAFX;GADF,CAIC,CAAC,IAJF,CAIQ,SAAA,GAAA;WACN,gBAAA,CAAA,EADM;EAAA,CAJR,EAME,WANF,EAFW;AAAA,CAvKb,CAAA;;AAAA,UAiLA,GAAa,SAAC,IAAD,GAAA;AACX,MAAA,UAAA;AAAA,EAAA,GAAA,GAAM,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAN,CAAA;AAAA,EACA,GAAG,CAAC,SAAJ,GAAgB,MADhB,CAAA;AAAA,EAEA,GAAG,CAAC,EAAJ,GAAS,IAAI,CAAC,EAFd,CAAA;AAAA,EAGA,KAAA,GAAQ,IAAI,CAAC,KAAL,CAAW,IAAI,CAAC,KAAhB,CAHR,CAAA;AAAA,EAIA,CAAA,CAAE,GAAF,CAAM,CAAC,GAAP,CAAW,KAAX,CAJA,CAAA;AAAA,EAKA,GAAG,CAAC,WAAJ,CAAgB,aAAA,CAAc,IAAd,CAAhB,CALA,CAAA;SAMA,QAAQ,CAAC,IAAI,CAAC,WAAd,CAA0B,GAA1B,EAPW;AAAA,CAjLb,CAAA;;AAAA,gBA0LA,GAAmB,SAAA,GAAA;AACjB,MAAA,KAAA;SAAA,KAAA,GAAQ,aAAa,CAAC,KAAd,CAAoB;AAAA,IAAC,QAAA,EAAU,KAAX;GAApB,CAAsC,CAAC,IAAvC,CAAA,CAA6C,CAAC,IAA9C,CAAoD,SAAC,KAAD,GAAA;AAC1D,QAAA,cAAA;AAAA,IAAA,CAAA,CAAE,OAAF,CAAU,CAAC,MAAX,CAAA,CAAA,CAAA;AAEA,SAAA,4CAAA;uBAAA;AAAA,MAAA,UAAA,CAAW,IAAX,CAAA,CAAA;AAAA,KAFA;WAIA,CAAA,CAAE,OAAF,CAAU,CAAC,SAAX,CACE;AAAA,MAAA,IAAA,EAAM,SAAC,CAAD,GAAA;eAAM,UAAA,CAAW,IAAX,EAAN;MAAA,CAAN;KADF,CAEC,CAAC,EAFF,CAEK,OAFL,EAEc,SAAA,GAAA;AACZ,UAAA,CAAA;AAAA,MAAA,CAAA,CAAE,IAAF,CAAO,CAAC,GAAR,CAAY,SAAZ,EAAsB,GAAtB,CAAA,CAAA;AACA,MAAA,IAAG,WAAH;AACE,QAAA,CAAA,GAAI,IAAA,KAAQ,WAAZ,CAAA;AAAA,QACA,WAAW,CAAC,SAAZ,GAAwB,CAAA,CAAE,UAAF,EAAc,WAAd,CAA2B,CAAA,CAAA,CAAE,CAAC,KADtD,CAAA;AAAA,QAEA,UAAA,CAAW,WAAX,CAFA,CAAA;AAAA,QAGA,WAAA,GAAc,IAHd,CAAA;AAAA,QAIA,cAAA,GAAiB,CAJjB,CAAA;AAKA,QAAA,IAAU,CAAV;AAAA,gBAAA,CAAA;SANF;OADA;AAAA,MASA,cAAA,EATA,CAAA;AAUA,MAAA,IAAG,cAAA,KAAkB,CAArB;eACE,SAAA,GAAY,UAAA,CAAY,CAAA,SAAA,KAAA,GAAA;iBAAA,SAAA,GAAA;AACtB,gBAAA,KAAA;AAAA,YAAA,cAAA,GAAiB,CAAjB,CAAA;AAAA,YACA,WAAA,GAAc,KADd,CAAA;AAAA,YAEA,KAAA,GAAQ,QAAQ,CAAC,aAAT,CAAuB,UAAvB,CAFR,CAAA;AAAA,YAGA,KAAK,CAAC,KAAN,GAAc,KAAI,CAAC,SAHnB,CAAA;AAAA,YAIA,CAAA,CAAE,KAAF,CAAQ,CAAC,KAAT,CAAgB,CAAA,CAAE,KAAF,CAAO,CAAC,KAAR,CAAA,CAAhB,CAJA,CAAA;AAAA,YAKA,CAAA,CAAE,KAAF,CAAQ,CAAC,MAAT,CAAiB,CAAA,CAAE,KAAF,CAAO,CAAC,MAAR,CAAA,CAAjB,CALA,CAAA;AAAA,YAMA,KAAI,CAAC,SAAL,GAAiB,EANjB,CAAA;AAAA,YAOA,KAAI,CAAC,WAAL,CAAiB,KAAjB,CAPA,CAAA;mBAQA,KAAK,CAAC,MAAN,CAAA,EATsB;UAAA,EAAA;QAAA,CAAA,CAAA,CAAA,IAAA,CAAZ,EAUV,GAVU,EADd;OAAA,MAAA;AAaE,QAAA,cAAA,GAAiB,CAAjB,CAAA;AAAA,QACA,YAAA,CAAa,SAAb,CADA,CAAA;AAAA,QAEA,YAAA,GAAe,IAFf,CAAA;eAGA,CAAA,CAAE,SAAF,CAAY,CAAC,IAAb,CAAA,EAhBF;OAXY;IAAA,CAFd,CA+BC,CAAC,EA/BF,CA+BK,UA/BL,EA+BiB,SAAC,CAAD,GAAA;aACf,CAAC,CAAC,eADa;IAAA,CA/BjB,EAL0D;EAAA,CAApD,EAuCN,WAvCM,EADS;AAAA,CA1LnB,CAAA;;AAAA,WAoOA,GAAc,SAAC,KAAD,GAAA;SACZ,OAAO,CAAC,GAAR,CAAY,KAAZ,EAAkB,KAAlB,EADY;AAAA,CApOd,CAAA;;AAAA,aAuOA,GAAgB,SAAC,IAAD,EAAO,KAAP,GAAA;AACd,EAAA,OAAO,CAAC,GAAR,CAAY,QAAZ,CAAA,CAAA;SACA,aAAa,CAAC,MAAd,CAAqB;AAAA,IAAE,IAAA,EAAM,IAAR;AAAA,IAAc,KAAA,EAAO,KAArB;AAAA,IAA4B,QAAA,EAAU,KAAtC;GAArB,CACE,CAAC,IADH,CACS,gBADT,EAC2B,WAD3B,EAFc;AAAA,CAvOhB,CAAA;;AAAA,YA4OA,GAAe,SAAC,GAAD,GAAA;AACb,EAAA,OAAO,CAAC,GAAR,CAAY,CAAA,CAAE,GAAF,CAAM,CAAC,MAAP,CAAA,CAAZ,EAA6B,CAAA,CAAE,GAAF,CAAM,CAAC,KAAP,CAAA,CAA7B,CAAA,CAAA;SACA;AAAA,IACE,eAAA,EAAiB,CAAA,CAAE,GAAF,CAAM,CAAC,GAAP,CAAW,iBAAX,CADnB;AAAA,IAEE,MAAA,EAAiB,CAAA,CAAE,GAAF,CAAM,CAAC,MAAP,CAAA,CAFnB;AAAA,IAGE,KAAA,EAAiB,CAAA,CAAE,GAAF,CAAM,CAAC,KAAP,CAAA,CAHnB;AAAA,IAIE,IAAA,EAAiB,CAAA,CAAE,GAAF,CAAM,CAAC,GAAP,CAAW,MAAX,CAJnB;AAAA,IAKE,GAAA,EAAiB,CAAA,CAAE,GAAF,CAAM,CAAC,GAAP,CAAW,KAAX,CALnB;IAFa;AAAA,CA5Of,CAAA;;AAAA,CAsPA,CAAE,QAAF,CAAW,CAAC,KAAZ,CAAkB,SAAA,GAAA;AAChB,EAAA,IAAA,CAAA,CAAA,CAAA;AAAA,EACA,aAAA,CAAA,CADA,CAAA;SAEA,gBAAA,CAAA,EAHgB;AAAA,CAAlB,CAtPA,CAAA","file":"app.js","sourcesContent":["todoItemTable = null\neditingNote = null\ndeletingNote = null\n\nnoteColor = \"red\"\nnoteWidth = \"100px\"\nnoteHeight = \"100px\"\nlineColor = \"rgba(0,0,0,0.5)\"\nlineWidth = 8\nclickCount = 0\nnoteClickCount = 0\nnoteTimer  = null\nnoteEditing = false\ndrawing = false\nbeginX = 0\nbeginY = 0\n\ntimer = null\n\nlistenActions = ->\n  canvas = $('#canvas')\n  canvas.attr('width', canvas.width())\n  canvas.attr('height', canvas.height())\n\n  canvas.on 'click', (e)->\n    if editingNote\n      tarea = $('textarea', editingNote).first()\n      editingNote.innerHTML = jQuery('<div>').text(tarea.val()).html()\n      $(editingNote).width(tarea.width())\n      $(editingNote).height(tarea.height())\n      style = extractStyle(editingNote)\n      todoItemTable.update(\n        id: editingNote.id,\n        style: JSON.stringify(style),\n        text: editingNote.innerHTML\n      ).then( ->\n        console.log 'updated'\n        refreshTodoItems()\n      , handleError)\n      editingNote = null\n      return\n\n    if drawing\n      drawing = false\n      return\n\n    clickCount++\n    console.log 'click', clickCount\n\n    if clickCount == 1\n      timer = setTimeout( ()->\n        clickCount = 0\n        style =\n          top:    e.pageY,\n          left:   e.pageX,\n          width:  noteWidth,\n          height: noteHeight,\n          backgroundColor: noteColor\n        insertNewItem(\"create a new note\", JSON.stringify style)\n      , 300)\n    else\n      clickCount = 0\n      drawing = true\n      beginX = e.pageX\n      beginY = e.pageY\n      clearTimeout timer\n   .on 'dblclick', (e)->\n    e.preventDefault()\n\n  canvas.on 'mousemove', (e)->\n    return unless drawing\n    x = e.pageX\n    y = e.pageY\n    if (beginX - x)*(beginX - x) + (beginY - y)*(beginY - y) < 200\n      return\n\n    context = this.getContext(\"2d\")\n    context.strokeStyle = lineColor\n    context.lineWidth = lineWidth\n    context.beginPath()\n    context.moveTo(beginX, beginY)\n    context.lineTo(x, y)\n    context.stroke()\n    context.closePath()\n    beginX = x\n    beginY = y\n\n  $(document).on 'keyup', (e)->\n    return unless drawing\n\n    switch e.keyCode\n      when 37 then strokeStrike(0,beginY)\n      when 38 then strokeStrike(beginX,0)\n      when 39 then strokeStrike($(this).width(),beginY)\n      when 40 then strokeStrike(beginX,$(this).height())\n      else return\n    drawing = false\n\n  $('#dialog_yes').click ->\n    if deletingNote\n      todoItemTable.update(\n        id: deletingNote.id\n        complete: true\n      ).then( ->\n        console.log 'completed'\n        refreshTodoItems()\n      , handleError)\n    $('#dialog').hide()\n  $('#dialog_no').click ->\n    $('#dialog').hide()\n\n  $('#color_panel').on('click', ->\n    if this.className == 'inactive'\n      this.className = \"active\"\n    else\n      this.className = 'inactive'\n  )\n\n  $('#color_panel div').on('click', ->\n    parent = $('#color_panel').first()\n    if parent.hasClass 'inactive'\n      return\n    tmp = document.createElement 'div'\n    current = parent.children()[2]\n    parent[0].replaceChild(tmp, this)\n    parent[0].replaceChild(this, current)\n    parent[0].replaceChild(current, tmp)\n    noteColor = $(this).css('backgroundColor')\n  )\n\nstrokeStrike = (x,y)->\n  canvas = $('#canvas')[0]\n  context = canvas.getContext(\"2d\")\n  context.strokeStyle = lineColor\n  context.lineWidth = lineWidth\n  context.beginPath()\n  context.moveTo(beginX, beginY)\n  context.lineTo(x, y)\n  context.stroke()\n  context.closePath()\ninit = ->\n    client = new WindowsAzure.MobileServiceClient(\n      'https://whiteboard.azure-mobile.net/',\n      'ayQItbHiEURdZHPJXAyjjTrIRXWUog83')\n    todoItemTable = client.getTable('todoitem')\n\ncreateYoutbue = (id)->\n  iframe = document.createElement 'iframe'\n  iframe.className = 'youtube-player'\n  iframe.type = \"text/html\"\n  iframe.src =\"http://www.youtube.com/embed/\" + id + \"?rel=0\"\n  $(iframe).attr(\"frameborder\", \"0\")\n  $(iframe).attr(\"autoplay\", \"1\")\n  iframe\n\nimgreg = /^https?:\\/\\/(?:[a-z0-9\\-_]+\\.)+[a-z]{2,6}(?:\\/[^\\/#?]+)+\\.(?:jpe?g|gif|png)$/\nytreg = /^https?:\\/\\/www.youtube.com\\/watch\\?v=(.+)/\ncreateContent = (item)->\n  if m = item.text.match ytreg\n    createYoutbue(m[1])\n  else if item.text.match(imgreg)\n    img = document.createElement 'img'\n    img.src = item.text\n    img\n  else\n    document.createTextNode(item.text)\n\nupdateNote = (note)->\n  style = extractStyle(note)\n  todoItemTable.update(\n    id: note.id,\n    style: JSON.stringify(style)\n    text: note.innerHTML\n  ).then( ->\n    refreshTodoItems()\n  , handleError)\n\nappendNote = (item)->\n  div = document.createElement(\"div\")\n  div.className = \"note\"\n  div.id = item.id\n  style = JSON.parse(item.style)\n  $(div).css(style)\n  div.appendChild createContent(item)\n  document.body.appendChild div\n\nrefreshTodoItems = ->\n  query = todoItemTable.where({complete: false}).read().then( (items)->\n    $('.note').remove()\n\n    appendNote(item) for item in items\n\n    $('.note').draggable(\n      stop: (e)-> updateNote(this)\n    ).on('click', ->\n      $(this).css('z-index',999)\n      if editingNote\n        f = this == editingNote\n        editingNote.innerHTML = $('textarea', editingNote)[0].value\n        updateNote(editingNote)\n        editingNote = null\n        noteClickCount = 0\n        return if f\n\n      noteClickCount++\n      if noteClickCount == 1\n        noteTimer = setTimeout( ()=>\n          noteClickCount = 0\n          editingNote = this\n          tarea = document.createElement('textarea')\n          tarea.value = this.innerHTML\n          $(tarea).width( $(this).width() )\n          $(tarea).height( $(this).height() )\n          this.innerHTML = \"\"\n          this.appendChild tarea\n          tarea.select()\n        , 500)\n      else\n        noteClickCount = 0\n        clearTimeout(noteTimer)\n        deletingNote = this\n        $('#dialog').show()\n\n    ).on('dblclick', (e)->\n      e.preventDefault\n    )\n  , handleError)\n\nhandleError = (error) ->\n  console.log \"ERR\",error\n\ninsertNewItem = (text, style)->\n  console.log 'insert'\n  todoItemTable.insert({ text: text, style: style, complete: false })\n    .then( refreshTodoItems, handleError)\n\nextractStyle = (dom)->\n  console.log $(dom).height(), $(dom).width()\n  {\n    backgroundColor: $(dom).css(\"backgroundColor\"),\n    height:          $(dom).height(),\n    width:           $(dom).width(),\n    left:            $(dom).css(\"left\"),\n    top:             $(dom).css(\"top\")\n  }\n\n$(document).ready ->\n  init()\n  listenActions()\n  refreshTodoItems()\n\n"],"sourceRoot":"/src"}